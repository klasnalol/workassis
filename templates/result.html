{% extends 'base.html' %}

{% block title %}Result - Product Query App{% endblock %}

{% block scripts %}
<<link rel="stylesheet" href="{{ url_for('static', filename='styles/result.css') }}">
{% endblock %}
{% block content %}
<section>
    <h2>{{ translations['query_result'] }}</h2>
    <p><strong>{{ translations['your_query'] }}</strong> {{ query }}</p>
    <h3>{{ translations['products'] }}</h3>
    {# TODO: implement translations #}
    {# TODO: implement translations #}
    <div>
        <h5 id="filter-h5">
		<button id="filter-button" class="details-toggle">Фильтры</button>
		<dialog id="filter-dealog">
                    <form method="dialog" class="flex">
			<div id="filter-pricerange-div">
                            <input type="range">
			</div>
                        <button type="submit">Apply</button>
		    </form>
		</dialog>
	</h5>
    </div> 
    {% if products and products|length > 0 %}
        <div class="products-grid" id="products-container">
            {% for product in products %}
                <div class="product-item">
                    <div class="product-image">
                        {% if product.image %}
                            <img src="{{ url_for('static', filename='uploads/' + product['image']) }}" alt="{{ product['name'] }}" style="max-width: 150px;">
                        {% endif %}
                    </div>
                    <h4>{{ product['name'] }}</h4>
                    <p>{{ translations['price'] }} ₸ {{ product['price'] }}</p>
                    <p>{{ translations['category'] }}: {{ product['category'] }}</p>
                    <button class="details-toggle" product-id="{{ product['id'] }}" >{{ translations['more_info'] }}</button>
                    <div id="product-details-{{ product['id'] }}" class="product-details" style="display: none;">
                        <p id="additional-info-{{ product['id'] }}"></p>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p>{{ translations['no_products_found'] }}</p>
    {% endif %}
    <a href="{{ url_for('index') }}">{{ translations['go_back_home'] }}</a>
</section>

<script defer src="{{ url_for('static', filename='scripts/minified/result.min.js') }}"></script>
{% endblock %}
